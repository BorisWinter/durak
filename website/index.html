<!DOCTYPE html>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
    <title>The Game of дурак</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" href="assets/css/main.css" />
  </head>
  <body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">
      <!-- Main -->
      <div id="main">
        <div class="inner">
          <!-- Header -->
          <header id="header">
            <a href="index.html" class="logo"><strong> </strong></a>
          </header>

          <!-- Banner -->
          <section id="banner">
            <div class="content">
              <header>
                <h2>Higher Order Knowledge in the game of дурак (Durak)</h2>
                <p>s2774291 / s3142558 / s3092836</p>
              </header>
              <p>
                This project aims to analyze a simplified version of the Russian
                card game дурак, using epistemic logic and Kripke models.
              </p>

              <ul class="actions">
                <li>
                  <a
                    target="_blank"
                    href="https://www.wikiwand.com/en/Durak"
                    class="button big"
                    >Wikipedia</a
                  >
                </li>
                <li>
                  <a
                    target="_blank"
                    href="https://github.com/BorisWinter/durak"
                    class="button big"
                    >Github</a
                  >
                </li>
              </ul>
            </div>
            <span class="image object">
              <img src="images/durak_game.jpg" alt="" />
            </span>
          </section>

          <!-- Section -->
          <section id="playing-durak">
            <div class="features">
              <header class="major">
                <h2>Playing Durak</h2>
              </header>

              <div class="content">
                <header>
                  <h3>Introduction to Durak's rules</h3>
                </header>
                <p>
                  We play Durak in this simulation with very simplified rules.
                  You can find a "playthrough" demonstration of the simple rules
                  of the game below. We play with 3 suits, and cards are ranked
                  according to number and trump suit. If Clubs is the trump
                  suit, the ranking is as follows: C4 > C3 > C2 > S4 = H4 > S3 =
                  H3 > S2 = H2.
                </p>
              </div>

              <div class="content">
                <span class="image right"
                  ><img src="images/game-states/state1.jpg" alt=""
                /></span>
                <h3>Start of the Game</h3>
                <p>
                  All players have their cards dealt to them. In our basic game,
                  the handlimit is two, meaning that every player has 2 cards.
                  Players can only see their own cards. One of the cards in the
                  deck is visible to the players (in this illustration, that's
                  the 3 of Clubs), and its suit indicates the trump suit. The
                  other cards in the deck are unknown to the players. The
                  discard pile is empty.
                </p>
              </div>

              <div class="content">
                <span class="image right"
                  ><img src="images/game-states/state2.jpg" alt=""
                /></span>
                <h3>First attack</h3>
                <p>
                  The first player is selected randomly, in this case, it's
                  North. This player does not have any information about the
                  player they are attacking (South), so they follow the
                  appropriate strategy.
                </p>
              </div>

              <div class="content">
                <span class="image right"
                  ><img src="images/game-states/state3.jpg" alt=""
                /></span>
                <h3>Successful Defence</h3>
                <p>
                  Player South can successfully defend against the attack by
                  North by playing a card with a higher value. A player has to
                  defend if they can.
                </p>
              </div>

              <div class="content">
                <span class="image right"
                  ><img src="images/game-states/state4.jpg" alt=""
                /></span>
                <h3>After a successful defence</h3>
                <p>
                  Both cards go to the discard pile and "disappear" from the
                  game.
                </p>
              </div>

              <div class="content">
                <span class="image right"
                  ><img src="images/game-states/state5.jpg" alt=""
                /></span>
                <h3>Hand limit</h3>
                <p>
                  As both player's hand size is lower than the hand limit of 2,
                  they both draw a new card from the deck.
                </p>
              </div>

              <div class="content">
                <span class="image right"
                  ><img src="images/game-states/state6.jpg" alt=""
                /></span>
                <h3>Next attack</h3>
                <p>
                  Player South now attacks player West (not according to the
                  strategy, as West plays the highest value in the game. This
                  behaviour would not happen in our simulated games, but would
                  happen in real-life games. In this case this was done to
                  illustrate an unsuccessful defence in the next step.).
                </p>
              </div>

              <div class="content">
                <span class="image right"
                  ><img src="images/game-states/state7.jpg" alt=""
                /></span>
                <h3>Player West tries to defend</h3>
                <p>
                  Player West sees that they cannot win against Player South's
                  card.
                </p>
              </div>

              <div class="content">
                <span class="image right"
                  ><img src="images/game-states/state8.jpg" alt=""
                /></span>
                <h3>Unsuccessful defence</h3>
                <p>
                  Player West is unsuccessful and takes both cards in the attack
                  field in their hand, as they could not defend.
                </p>
              </div>

              <div class="content">
                <span class="image right"
                  ><img src="images/game-states/state9.jpg" alt=""
                /></span>
                <h3>Player South Hand Limit</h3>
                <p>
                  Player South has too few cards in hand now, and draws the
                  final card from the deck. After this, players cannot draw any
                  card from the deck anymore, and cards can only be removed to
                  the discard pile. The player that reaches zero cards in hand
                  first, wins!
                </p>
              </div>
            </div>
          </section>

          <!-- Content -->
          <section id="theory">
            <div class="features">
              <header class="major">
                <h2>Theory</h2>
              </header>
              <p>
                Card games use many types of epistemic knowledge. You have the
                private and direct knowledge, about your own hand, inferred
                knowledge about the hands of the other players and the deck, and
                knowledge about the cards that have been discarded. In this
                page, we'll discuss the specific types of knowledge you can find
                in our game of Durak, our updating Kripke model, as well as
                possible extensions.
              </p>

              <hr class="major" />

              <h2>The Kripke Model</h2>
              <p>
                We model the game as a Kripke model, where every world in the
                model consists of the hands of each player + deck. So we have
                propositional atoms that consist of SUIT_NUMBER_PLAYER,
                representing that a certain card is in the hand of a player -
                and no card can be in the hand of more than one player.
              </p>

              <div class="content">
                <h3>Model properties</h3>
                <p>
                  Relations between our worlds are indistinguishability
                  relations. Given the features of Durak, our model must have
                  the following properties, as illustrated by the simplest
                  Kripke Model (right).
                </p>
                <span class="image right"
                  ><img src="images/simplestModel.jpeg" alt=""
                /></span>
                <dl>
                  <dt>Reflexive</dt>
                  <dd>
                    <p>No player candistinguish a world from itself.</p>
                  </dd>
                  <dt>Symmetric</dt>
                  <dd>
                    <p>
                      Player A can't distinguish world 1 from world 2, as A only
                      has access to its own hand. In world 2, A should still
                      consider world 1 possible. Hence, symmetric relations
                      between worlds.
                    </p>
                  </dd>
                  <dt>Transitive</dt>
                  <dd>
                    <p>
                      If player A cannot distinguish world 1 from world 2, and
                      not world 2 from world 3, then they can't distinguish 1
                      from 3 either.
                    </p>
                  </dd>
                </dl>
              </div>

              <p>
                These properties imply that our model is an S5 model. Hence, we
                can use S5 inference rules in our model. In our implementation,
                this means that we do not specify the links between worlds
                explicitly - we only consider the worlds that are "reachable" by
                a player from the current game state - a naive version of the
                equivalence classes we discussed in the course. Hence, we do not
                have to specify the relations between the "reachable worlds",
                since we know that they are transitive, symmetric and reflexive,
                hence, euclidean, and that for every world in "reachable
                worlds", it is connected to every other reachable world. This
                allows us to represent the worlds as a "reachable worlds" list
                per player in a given state, instead of a full Kripke model with
                relations.

                <span class="image center"
                  ><img src="images/reachableWorlds.jpeg" alt=""
                /></span>
              </p>

              <div class="content">
                <h2>First Order Knowledge</h2>
                <p>
                  First Order Knowledge is the first level of knowledge that we
                  can find in our Durak game. Every player knows the content of
                  their own hand. Additionally, players can have first order
                  knowledge about specific cards in the hands of other players.
                  For example, if there are two players left in the game, each
                  player can use the knowledge about their hand, and the cards
                  in the discard pile, to deduce the cards in the hand of the
                  other player.
                </p>

                <p>In our implementation, a player can derive knowledge from the Kripke
                either for all other players (including Deck and Discard), or for a single player.
                It can be used to update the knowledge with a given new card, or the removal of
                a card from that player's hand. Moreover, a player can use the knowledge of another
                player's cards in order to choose which card to attack with. </p>


<!--                <p>insert latex illustration here, to build.</p>-->
              </div>

              <div class="content">
                <h2>Common Knowledge</h2>
                <p>
                  In Durak, most of the knowledge is common knowledge due to public announcements. When players
                  attack, the attacking and defending cards become common
                  knowledge, and the result of the attack (card to discard pile,
                  or card to defending player) also becomes common knowledge.
                  Hence, once a card has been played on the table once, every
                  player always knows its location from that moment on. The
                  players can use this common knowledge to reason with.
                </p>
              </div>

              <div class="content">
<!--                <h2>Updating the Kripke Model</h2>-->
<!--                <p>-->
<!--                  Not sure if this is public announcement or something-->
<!--                  different. Maybe it's just a run. In any case, the state of-->
<!--                  the game changes every turn, as cards switch hands.-->
<!--                </p>-->

<!--                <hr class="major" />-->

                <h2>Limitations</h2>
                <p>
                  Playing with a greater hand limit, with more use for higher-order
                  knowledge in the strategies, was something that unfortunately took
                  too much runtime due to exploding complexity and programming limitations.

                  Moreover, the implementation of second- and higher-order knowledge
                  was something we wanted to add, but failed to do because of some
                  earlier bugs in the programs.
                </p>

                <p>
                  Lastly, a limitation of our implementation is the
                  probabilistic inference on possible cards. The player now does
                  not consider possible cards, only the cards that it knows for
                  sure. Extending this with either heuristic or formal
                  probabilistic epistemic method and taking these into accounts
                  in strategies might improve the win-chances of an agent.
                </p>
              </div>
            </div>
          </section>

          <!-- Implementation -->
          <section id="implementation">
            <div class="features">
              <header class="major">
                <h2>Implementation</h2>
              </header>
              <div class="row">
                <div class="col-6 col-12-small">
                  <h3>Mesa</h3>
                  <p>
                    The model that models the agents and the workings of the
                    game is based on the Python Mesa framework, version 0.8.7.
                    This framework is mainly used for initializing the main
                    model and the agents, as well as managing the flow of the
                    game using stages in the CustomStagedActivation module. The
                    visual simulation capabilities of Mesa have not been used.
                  </p>
                </div>
                <div class="col-6 col-12-small">
                  <h3>MLSolver</h3>
                  <p>
                    The structures used in our project code to represent a Kripke model are based on
                    the library <a href="https://github.com/erohkohl/mlsolver" target="_blank">msolver</a>.
                    Since the solver in this library removes worlds from a model, instead of removing the links to them,
                    we have adapted some of its definitions to better fit our own purposes.
                  </p>
                </div>
              </div>
            </div>
          </section>

          <!-- Experiments -->
          <section id="experiments">
            <div class="features">
              <header class="major">
                <h2>Experiments</h2>
              </header>

              <div class="row">
                <div class="col-12">
                  <p>
                    In order to determine whether using different orders of
                    knowledge influences a player's performance in the game, the
                    following experiments are performed. All experiments are
                    performed with 2 players, 2 suits, 3 cards per suit, and 1
                    starting card.
                  </p>
                </div>
                <div class="col-6 col-12-small">
                  <h3>Only Random Players</h3>
                  <p>
                    Before we can test whether using knowledge improves
                    performance, we need to create a basline. For this, we run
                    an experiment in which all three players use the random
                    strategy: they always play a random card. The experiment is
                    run for 100 rounds and clearly shows an approximately even
                    divide in number of losses.
                  </p>
                </div>
                <div class="col-5 col-12-small">
                  <!-- <h3>Result</h3> -->
                  <span class="image main"
                    ><img src="images/random_random_100.png" alt=""
                  /></span>
                </div>
              </div>

              <div class="row">
                <div class="col-6 col-12-small">
                  <h3>1st Order Knowledge VS Random Player</h3>
                  <p>
                    Next, we want to examine the performance boost that using
                    first order knowledge yields, when playing against a random
                    player.
                  </p>
                </div>
                <div class="col-5 col-12-small">
                  <!-- <h3>Result</h3> -->
                  <span class="image main"
                    ><img src="images/random_random_random.png" alt=""
                  /></span>
                </div>
              </div>

              <div class="row">
                <div class="col-6 col-12-small">
                  <h3>2nd Order Knowledge VS Random Player</h3>
                  <p>
                    Similar to the previous experiment, we perform an experiment
                    to determine whether using second order knowledge gives you
                    an edge over a random player.
                  </p>
                </div>
                <div class="col-5 col-12-small">
                  <!-- <h3>Result</h3> -->
                  <span class="image main"
                    ><img src="images/random_random_random.png" alt=""
                  /></span>
                </div>
              </div>

              <div class="row">
                <div class="col-6 col-12-small">
                  <h3>1st Order Knowledge VS 2nd Order Knowledge</h3>
                  <p>
                    Lastly, we want to examine whether using second order
                    knowledge is useful in this experimental setting.
                  </p>
                </div>
                <div class="col-5 col-12-small">
                  <!-- <h3>Result</h3> -->
                  <span class="image main"
                    ><img src="images/random_random_100.png" alt=""
                  /></span>
                </div>
              </div>
            </div>
          </section>

          <!-- Conclusion -->
          <section id="conclusion">
            <div class="features">
              <header class="major">
                <h2>Conclusion</h2>
              </header>
              <div class="row">
                <div class="col-6 col-12-small">
                  <h3>Conclusion</h3>
                  <p>
                    It seems that the game in the experimental setting has too
                    few cards to truly experiment with multiple levels of
                    knowledge. The mechanics of the game, especially the
                    possibility of cards moving from one player to another,
                    severily affect the costs of running the model. The reason
                    for this is that a defender losing and getting the attack
                    card causes new possible worlds to appear approximately 50%
                    of the time. Therefore, the number of possible worlds does not get
                    smaller after that turn, it stays more or less equal. This
                    leads to a lot of analysis being done over what is still a
                    large number of possible worlds.
                  </p>
                </div>
                <div class="col-6 col-12-small">
                  <h3>Future Research</h3>
                  <p>
                    Future research should investigate the usefulness of higher
                    orders of knowledge, even though the low number of cards in
                    this limited version significantly limits the possibility of
                    actually using that knowledge. Attempts to run experiments
                    with a higher number of players and cards would also be
                    interesting, as we assume that using higher order knowledge
                    would be more beneficial when the number of possible game
                    states grow.
                  </p>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>

      <!-- Sidebar -->
      <div id="sidebar">
        <div class="inner">
          <!-- Menu -->
          <nav id="menu">
            <header class="major">
              <h2>Menu</h2>
            </header>
            <ul>
              <li><a href="#banner">Introduction</a></li>
              <li><a href="#playing-durak">Playing дурак</a></li>
              <!-- <li><a href="elements.html">Simplifications</a></li> -->
              <li><a href="#theory">Theory</a></li>
              <li><a href="#implementation">Implementation</a></li>
              <li><a href="#experiments">Experiments</a></li>
              <li><a href="#conclusion">Conclusion</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
  </body>
</html>
